<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>OldMafia Chat</title>
</head>
<body>

<h2>რეგისტრაცია / შესვლა</h2>

<input type="text" id="nickname" placeholder="Nickname"><br><br>
<input type="email" id="email" placeholder="Email"><br><br>
<input type="password" id="password" placeholder="Password"><br><br>

<button onclick="register()">Register</button>
<button onclick="login()">Login</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const SUPABASE_URL = "https://ftfciebnywbondaiarnc.supabase.co";
const SUPABASE_KEY = "sb_publishable_eQZ0Su_JylgMxJfF80Pr_TP2";

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function register() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const nickname = document.getElementById("nickname").value;

  const { error } = await supabase.auth.signUp({
    email: email,
    password: password,
    options: {
      data: { nickname: nickname }
    }
  });

  if (error) {
    alert(error.message);
  } else {
    alert("Registration successful!");
  }
}

async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const { error } = await supabase.auth.signInWithPassword({
    email: email,
    password: password
  });

  if (error) {
    alert(error.message);
  } else {
    alert("Login successful!");
  }
}
</script>

</body>
</html>
