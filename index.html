<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Old Mafia</title>

<style>
body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:radial-gradient(circle,#330000 0%,#000 70%);
font-family:Arial;
}

.card{
background:#111;
padding:40px 30px;
border-radius:25px;
width:340px;
box-shadow:0 0 40px red;
text-align:center;
}

h1{
color:white;
text-shadow:0 0 20px red;
margin-bottom:25px;
}

input{
width:100%;
padding:12px;
margin-bottom:15px;
border:none;
border-radius:10px;
background:#1a1a1a;
color:white;
}

button{
width:100%;
padding:14px;
border:none;
border-radius:20px;
background:red;
color:white;
font-weight:bold;
margin-bottom:10px;
cursor:pointer;
}

button:hover{
background:#aa0000;
}

#msg{
color:white;
margin-top:10px;
}
</style>
</head>
<body>

<div class="card">
<h1>áƒ‘áƒ”áƒ‘áƒ”áƒ áƒ˜ áƒ›áƒáƒ¤áƒ˜áƒáƒ–áƒ”áƒ‘áƒ˜ ğŸ”¥</h1>

<input id="nickname" placeholder="áƒœáƒ˜áƒ™áƒœáƒ”áƒ˜áƒ›áƒ˜">
<input id="email" type="email" placeholder="áƒ”áƒšáƒ¤áƒáƒ¡áƒ¢áƒ">
<input id="password" type="password" placeholder="áƒáƒáƒ áƒáƒšáƒ˜">

<button onclick="register()">áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ</button>
<button onclick="login()">áƒ¨áƒ”áƒ¡áƒ•áƒšáƒ</button>

<p id="msg"></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = window.supabase.createClient(
"https://ftfciebnywbondaiarnc.supabase.co",
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0ZmNpZWJueXdib25kYWlhcm5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjYwNTYsImV4cCI6MjA4NjkwMjA1Nn0.2A5wgpS2gaFmgnGB2mWH7dpmjLvo75IE0QPRPrtUbzI"
);

async function register(){
const nickname=document.getElementById("nickname").value;
const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

const {data,error}=await supabase.auth.signUp({email,password});

if(error){
document.getElementById("msg").innerText=error.message;
}else{
document.getElementById("msg").innerText="áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ";

if(data.user){
await supabase.from("profiles").insert([{id:data.user.id,nickname:nickname}]);
}
}
}

async function login(){
const email=document.getElementById("email").value;
const password=document.getElementById("password").value;

const {error}=await supabase.auth.signInWithPassword({email,password});

if(error){
document.getElementById("msg").innerText=error.message;
}else{
document.getElementById("msg").innerText="áƒ¨áƒ”áƒ¡áƒ•áƒšáƒ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ";
}
}
</script>

</body>
</html>
