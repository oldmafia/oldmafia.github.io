<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>áƒ™áƒáƒ˜áƒ¤áƒ›áƒáƒœáƒ˜áƒ - áƒ©áƒáƒ¢áƒ˜</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body{
margin:0;
height:100vh;
display:flex;
flex-direction:column;
font-family:Arial;
background:linear-gradient(to bottom,#1a0000,#000);
color:white;
}

/* HEADER */
header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px 20px;
background:#111;
box-shadow:0 0 20px red;
}

.logo{
color:red;
font-weight:bold;
font-size:22px;
}

.user-box{
background:#222;
padding:8px 15px;
border-radius:20px;
}

/* CHAT AREA */
.chat-container{
flex:1;
display:flex;
flex-direction:column;
}

.messages{
flex:1;
overflow-y:auto;
padding:20px;
}

.message{
margin-bottom:10px;
background:#330000;
padding:10px 15px;
border-radius:15px;
max-width:70%;
}

/* INPUT BAR */
.input-bar{
display:flex;
padding:15px;
background:#111;
}

.input-bar input{
flex:1;
padding:12px;
border:none;
border-radius:20px;
background:#222;
color:white;
margin-right:10px;
outline:none;
}

.input-bar button{
padding:12px 18px;
border:none;
border-radius:20px;
background:red;
color:white;
cursor:pointer;
font-weight:bold;
}

.input-bar button:hover{
background:darkred;
}
</style>
</head>
<body>

<header>
<div class="logo">ğŸ”¥ áƒ™áƒáƒ˜áƒ¤áƒ›áƒáƒœáƒ˜áƒ</div>
<div class="user-box">
ğŸ‘¤ <span id="username">áƒ˜áƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ‘áƒ...</span>
</div>
</header>

<div class="chat-container">

<div class="messages" id="messages">
<div class="message">áƒ›áƒáƒ’áƒ”áƒ¡áƒáƒšáƒ›áƒ”áƒ‘áƒ˜ áƒ™áƒáƒ˜áƒ¤áƒ›áƒáƒœáƒ˜áƒáƒ¨áƒ˜ ğŸ˜</div>
</div>

<div class="input-bar">
<input type="text" id="messageInput" placeholder="áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ... ğŸ˜Š">
<button onclick="sendMessage()">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
</div>

</div>

<script>
const { createClient } = supabase;

const supabaseClient = createClient(
  "https://ftfciebnywbondaiarnc.supabase.co",
  "sb_publishable_eQZDSu_Jy1gWmXJFF800Pw_TP2kBRLI"
);

/* USER CHECK */
async function checkUser(){
  const { data: { user } } = await supabaseClient.auth.getUser();

  if(!user){
    window.location.href = "index.html";
    return;
  }

  const nickname = user.user_metadata?.nickname;
  document.getElementById("username").innerText = nickname || user.email;
}

checkUser();

/* SEND MESSAGE (local demo) */
function sendMessage(){
  const input = document.getElementById("messageInput");
  const text = input.value.trim();
  if(!text) return;

  const msgDiv = document.createElement("div");
  msgDiv.className = "message";
  msgDiv.innerText = text;

  document.getElementById("messages").appendChild(msgDiv);
  input.value = "";
}
</script>

</body>
</html>
