<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Old Mafia</title>

<style>
body{
margin:0;
font-family:Arial;
background:#0e0e0e;
color:white;
display:flex;
height:100vh;
overflow:hidden;
}

/* Sidebar */
.sidebar{
width:220px;
background:#1a0000;
padding:15px;
display:flex;
flex-direction:column;
gap:10px;
}

.room{
padding:10px;
border-radius:8px;
cursor:pointer;
background:#2a0000;
}

.room:hover{
background:#400000;
}

/* Main */
.main{
flex:1;
display:flex;
flex-direction:column;
}

.topbar{
height:60px;
background:#140000;
display:flex;
align-items:center;
justify-content:flex-end;
padding:0 20px;
gap:15px;
}

.icon{
cursor:pointer;
font-size:18px;
}

.chat{
flex:1;
padding:15px;
overflow-y:auto;
}

.message{
background:#1f1f1f;
padding:8px 12px;
border-radius:10px;
margin-bottom:10px;
max-width:70%;
}

.input-area{
display:flex;
border-top:1px solid #400000;
}

.input-area input{
flex:1;
padding:12px;
border:none;
background:#1a1a1a;
color:white;
}

.input-area button{
padding:12px 20px;
border:none;
background:red;
color:white;
cursor:pointer;
}

/* Profile Popup */
.popup{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
display:none;
justify-content:center;
align-items:center;
}

.popup-content{
background:#1a0000;
padding:25px;
border-radius:15px;
width:300px;
text-align:center;
}

.popup button{
margin-top:15px;
padding:8px 15px;
border:none;
border-radius:8px;
background:red;
color:white;
cursor:pointer;
}
</style>
</head>
<body>

<div class="sidebar">
<div class="room" onclick="changeRoom('áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜')">ğŸ’¬ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜</div>
<div class="room" onclick="changeRoom('VIP áƒ¡áƒáƒ£áƒ‘áƒ áƒ”áƒ‘áƒ˜')">ğŸ’ VIP áƒ¡áƒáƒ£áƒ‘áƒ áƒ”áƒ‘áƒ˜</div>
<div class="room" onclick="changeRoom('áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ')">ğŸ” áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ</div>
<div class="room" onclick="changeRoom('áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ')">ğŸ§  áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ</div>
<div class="room" onclick="changeRoom('áƒ¤áƒáƒ áƒ£áƒ›áƒ˜')">ğŸ“œ áƒ¤áƒáƒ áƒ£áƒ›áƒ˜</div>
<div class="room" onclick="changeRoom('áƒ“áƒáƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ')">ğŸ†˜ áƒ“áƒáƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ</div>
<div class="room" onclick="changeRoom('áƒ˜áƒáƒ áƒáƒ¦áƒ˜áƒ¡ áƒáƒ—áƒáƒ®áƒ˜')">ğŸ”« áƒ˜áƒáƒ áƒáƒ¦áƒ˜áƒ¡ áƒáƒ—áƒáƒ®áƒ˜</div>
</div>

<div class="main">
<div class="topbar">
<div class="icon" onclick="openPrivate()">âœ‰ï¸</div>
<div class="icon" onclick="openProfile()">ğŸ‘¤</div>
</div>

<div class="chat" id="chat"></div>

<div class="input-area">
<input type="text" id="msgInput" placeholder="áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ›áƒ”áƒ¡áƒ˜áƒ¯áƒ˜...">
<button onclick="sendMessage()">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
</div>
</div>

<!-- Profile Popup -->
<div class="popup" id="profilePopup">
<div class="popup-content">
<h3>ğŸ‘¤ áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜</h3>
<div id="profileName"></div>
<div id="profileEmail"></div>
<button onclick="logout()">Logout</button>
<button onclick="closeProfile()">áƒ“áƒáƒ®áƒ£áƒ áƒ•áƒ</button>
</div>
</div>

<script>
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user){
window.location.href="index.html";
}

document.getElementById("profileName").innerText = "áƒœáƒ˜áƒ™áƒœáƒ”áƒ˜áƒ›áƒ˜: " + user.nickname;
document.getElementById("profileEmail").innerText = "áƒ”áƒšáƒ¤áƒáƒ¡áƒ¢áƒ: " + user.email;

let currentRoom = "áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜";

function changeRoom(room){
currentRoom = room;
document.getElementById("chat").innerHTML = "";
}

function openPrivate(){
currentRoom = "áƒáƒ˜áƒ áƒáƒ“áƒ˜ áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ”áƒ‘áƒ˜";
document.getElementById("chat").innerHTML = "";
}

function sendMessage(){
let input = document.getElementById("msgInput");
if(input.value.trim()==="") return;

let msgDiv = document.createElement("div");
msgDiv.className="message";
msgDiv.innerText = user.nickname + ": " + input.value;

document.getElementById("chat").appendChild(msgDiv);
input.value="";
}

function openProfile(){
document.getElementById("profilePopup").style.display="flex";
}

function closeProfile(){
document.getElementById("profilePopup").style.display="none";
}

function logout(){
localStorage.removeItem("currentUser");
window.location.href="index.html";
}
</script>

</body>
</html>
