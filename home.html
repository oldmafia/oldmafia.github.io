<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Old Mafia</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;font-family:Arial;background:#1a0000;color:white;overflow:hidden;}
.wrapper{display:flex;height:100%;}
.sidebar{width:210px;background:#2b0000;padding:15px 10px;display:flex;flex-direction:column;gap:10px;overflow-y:auto;}
.room{padding:12px;border-radius:14px;background:#3b0000;cursor:pointer;font-size:14px;transition:0.2s;}
.room:hover{background:#550000;}
.room.active{background:#ff1a1a;}
.main{flex:1;display:flex;flex-direction:column;padding:15px;}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.room-title{color:#ff2e2e;font-weight:bold;font-size:18px;}
.icon-btn{width:36px;height:36px;border:none;border-radius:10px;background:#3b0000;color:white;cursor:pointer;}
.chat-box{flex:1;background:#111;border-radius:25px;display:flex;flex-direction:column;overflow:hidden;}
.chat{flex:1;padding:15px;overflow-y:auto;}
.message{background:#2a2a2a;padding:10px 14px;border-radius:18px;margin-bottom:10px;max-width:75%;}
.nickname{color:#ff4d4d;font-size:12px;margin-bottom:4px;}
.input-area{display:flex;gap:6px;padding:10px;background:#220000;}
.input-area input{flex:1;height:38px;border:none;border-radius:14px;background:#1e1e1e;color:white;padding:0 10px;}
.send-btn{width:85px;height:38px;border:none;border-radius:14px;background:#ff1a1a;color:white;font-weight:bold;cursor:pointer;}
.profile-box{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#111;padding:20px;border-radius:15px;display:none;}
</style>
</head>
<body>

<div class="wrapper">
<div class="sidebar" id="roomList"></div>

<div class="main">
<div class="topbar">
<div class="room-title" id="roomTitle">ğŸ’¬ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜</div>
<button class="icon-btn" onclick="openProfile()">ğŸ‘¤</button>
</div>

<div class="chat-box">
<div class="chat" id="chat"></div>
<div class="input-area">
<input type="text" id="msgInput" placeholder="áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ›áƒ”áƒ¡áƒ˜áƒ¯áƒ˜...">
<button class="send-btn" onclick="sendMessage()">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
</div>
</div>
</div>
</div>

<div class="profile-box" id="profileBox">
<h3>ğŸ‘¤ áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜</h3>
<p>áƒ¡áƒáƒ®áƒ”áƒšáƒ˜: <span id="profileName"></span></p>
<p>ğŸ” áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ: <span id="profileShifro"></span></p>
<p>ğŸ§  áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ: <span id="profileViktorina"></span></p>
<p>ğŸª¢ áƒ©áƒáƒ›áƒáƒ®áƒ áƒ©áƒáƒ‘áƒáƒœáƒ: <span id="profileCham"></span></p>
<br>
<button onclick="closeProfile()">áƒ“áƒáƒ®áƒ£áƒ áƒ•áƒ</button>
</div>

<script>

let nickname = localStorage.getItem("nickname") || "Guest";

let userScores = JSON.parse(localStorage.getItem("scores")) || {};
if(!userScores[nickname]){
userScores[nickname]={
shifrograma:0,
viktorina:0,
chamokhrochobana:0
};
}

let rooms={
"ğŸ’¬ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜":[],
"ğŸ’ VIP áƒ¡áƒáƒ£áƒ‘áƒ áƒ”áƒ‘áƒ˜":[],
"ğŸ” áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ":[],
"ğŸª¢ áƒ©áƒáƒ›áƒáƒ®áƒ áƒ©áƒáƒ‘áƒáƒœáƒ":[],
"ğŸ§  áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ":[],
"ğŸ“œ áƒ¤áƒáƒ áƒ£áƒ›áƒ˜":[],
"ğŸ†˜ áƒ“áƒáƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ":[],
"ğŸ”« áƒ˜áƒáƒ áƒáƒ¦áƒ˜áƒ¡ áƒáƒ—áƒáƒ®áƒ˜":[],
"ğŸ˜‚ áƒ˜áƒ£áƒ›áƒáƒ áƒ˜":[],
"ğŸµ áƒ›áƒ£áƒ¡áƒ˜áƒ™áƒ":[],
"ğŸ“¸ áƒ’áƒáƒšáƒ”áƒ áƒ”áƒ":[]
};

let currentRoom="ğŸ’¬ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜";

let gameActive=false;
let lives=3;
let currentWord="";
let usedWords=[];

const words=[ "áƒ™áƒáƒ¢áƒ","áƒ«áƒáƒ¦áƒšáƒ˜","áƒ›áƒ–áƒ”","áƒ›áƒ—áƒ•áƒáƒ áƒ”","áƒ•áƒáƒ áƒ¡áƒ™áƒ•áƒšáƒáƒ•áƒ˜","áƒ¡áƒáƒ®áƒšáƒ˜","áƒ¥áƒáƒ áƒ˜","áƒ¬áƒ•áƒ˜áƒ›áƒ","áƒ—áƒáƒ•áƒšáƒ˜","áƒ–áƒ¦áƒ•áƒ",
"áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”","áƒ¢áƒ§áƒ”","áƒ§áƒ•áƒáƒ•áƒ˜áƒšáƒ˜","áƒ‘áƒáƒ¦áƒ˜","áƒ‘áƒáƒ•áƒ¨áƒ•áƒ˜","áƒ“áƒ”áƒ“áƒ","áƒ›áƒáƒ›áƒ","áƒ“áƒ","áƒ«áƒ›áƒ","áƒ›áƒ”áƒ’áƒáƒ‘áƒáƒ áƒ˜",
"áƒ¡áƒ˜áƒ§áƒ•áƒáƒ áƒ£áƒšáƒ˜","áƒ’áƒ£áƒšáƒ˜","áƒ¡áƒ˜áƒªáƒ˜áƒšáƒ˜","áƒªáƒ áƒ”áƒ›áƒšáƒ˜","áƒ¤áƒáƒœáƒ¯áƒáƒ áƒ","áƒ™áƒáƒ áƒ˜","áƒ›áƒáƒ’áƒ˜áƒ“áƒ","áƒ¡áƒ™áƒáƒ›áƒ˜","áƒ¬áƒ˜áƒ’áƒœáƒ˜","áƒ áƒ•áƒ”áƒ£áƒšáƒ˜",
"áƒ™áƒáƒšáƒáƒ›áƒ˜","áƒ¢áƒ”áƒšáƒ”áƒ¤áƒáƒœáƒ˜","áƒ™áƒáƒ›áƒáƒ˜áƒ£áƒ¢áƒ”áƒ áƒ˜","áƒ¡áƒ£áƒ áƒáƒ—áƒ˜","áƒ¢áƒáƒœáƒ¡áƒáƒªáƒ›áƒ”áƒšáƒ˜","áƒ¥áƒ£áƒ“áƒ˜","áƒ¤áƒ”áƒ®áƒ¡áƒáƒªáƒ›áƒ”áƒšáƒ˜","áƒ›áƒ£áƒ–áƒ”áƒ£áƒ›áƒ˜","áƒ¡áƒ™áƒáƒšáƒ","áƒ£áƒœáƒ˜áƒ•áƒ”áƒ áƒ¡áƒ˜áƒ¢áƒ”áƒ¢áƒ˜",
"áƒ¥áƒáƒšáƒáƒ¥áƒ˜","áƒ¡áƒáƒ¤áƒ”áƒšáƒ˜","áƒ›áƒáƒ¢áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜","áƒáƒ•áƒ¢áƒáƒ‘áƒ£áƒ¡áƒ˜","áƒ—áƒ•áƒ˜áƒ—áƒ›áƒ¤áƒ áƒ˜áƒœáƒáƒ•áƒ˜","áƒ®áƒ˜áƒšáƒ˜","áƒ•áƒáƒ¨áƒšáƒ˜","áƒ›áƒ¡áƒ®áƒáƒšáƒ˜","áƒ‘áƒáƒœáƒáƒœáƒ˜","áƒ§áƒáƒ•áƒ",
"áƒ¨áƒáƒ™áƒáƒšáƒáƒ“áƒ˜","áƒœáƒáƒ›áƒªáƒ®áƒ•áƒáƒ áƒ˜","áƒ¡áƒáƒ—áƒáƒ›áƒáƒ¨áƒ","áƒ›áƒ—áƒ”áƒ‘áƒ˜","áƒ‘áƒáƒšáƒ˜áƒ¨áƒ˜","áƒ¡áƒáƒáƒ—áƒ˜","áƒ¡áƒáƒ áƒ™áƒ”","áƒ–áƒáƒ¤áƒ®áƒ£áƒšáƒ˜","áƒ–áƒáƒ›áƒ—áƒáƒ áƒ˜","áƒ’áƒáƒ–áƒáƒ¤áƒ®áƒ£áƒšáƒ˜"];

const correctSound=new Audio("https://www.soundjay.com/buttons/sounds/button-4.mp3");
const loseSound=new Audio("https://www.soundjay.com/misc/sounds/fail-buzzer-02.mp3");

const roomList=document.getElementById("roomList");
const chat=document.getElementById("chat");
const roomTitle=document.getElementById("roomTitle");

function renderRooms(){
roomList.innerHTML="";
Object.keys(rooms).forEach(room=>{
let div=document.createElement("div");
div.className="room";
if(room===currentRoom) div.classList.add("active");
div.innerText=room;
div.onclick=()=>changeRoom(room);
roomList.appendChild(div);
});
}

function changeRoom(room){
currentRoom=room;
roomTitle.innerText=room;
renderRooms();
renderMessages();
if(room==="ğŸ” áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ"){startGame();}else{gameActive=false;}
}

function renderMessages(){
chat.innerHTML="";
rooms[currentRoom].forEach(msg=>{
let div=document.createElement("div");
div.className="message";
div.innerHTML="<div class='nickname'>"+msg.name+"</div>"+msg.text;
chat.appendChild(div);
});
chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
let input=document.getElementById("msgInput");
let text=input.value.trim();
if(!text) return;

rooms[currentRoom].push({name:nickname,text:text});

if(currentRoom==="ğŸ” áƒ¨áƒ˜áƒ¤áƒ áƒáƒ’áƒ áƒáƒ›áƒ" && gameActive){
if(text===currentWord){
correctSound.play();
userScores[nickname].shifrograma+=10;
localStorage.setItem("scores",JSON.stringify(userScores));
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"âœ… áƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜! +10 áƒ¥áƒ£áƒšáƒ"});
nextWord();
}else{
lives--;
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"âŒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜áƒ! áƒ¡áƒ˜áƒªáƒáƒªáƒ®áƒšáƒ”: "+lives});
if(lives<=0){
loseSound.play();
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"ğŸ’€ áƒ—áƒáƒ›áƒáƒ¨áƒ˜ áƒ“áƒáƒ¡áƒ áƒ£áƒšáƒ“áƒ!"});
gameActive=false;
}
}
}

input.value="";
renderMessages();
}

function shuffle(word){return word.split('').sort(()=>Math.random()-0.5).join('');}

function startGame(){
lives=3;
usedWords=[];
gameActive=true;
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"ğŸ® áƒ—áƒáƒ›áƒáƒ¨áƒ˜ áƒ“áƒáƒ˜áƒ¬áƒ§áƒ!"});
nextWord();
renderMessages();
}

function nextWord(){
if(usedWords.length===words.length){
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"ğŸ‘‘ áƒ§áƒ•áƒ”áƒšáƒ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ áƒáƒ›áƒáƒ˜áƒ¬áƒ£áƒ áƒ! áƒ›áƒáƒ˜áƒ’áƒ”!"});
gameActive=false;
return;
}
let available=words.filter(w=>!usedWords.includes(w));
currentWord=available[Math.floor(Math.random()*available.length)];
usedWords.push(currentWord);
rooms[currentRoom].push({name:"ğŸ¤– áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ",text:"ğŸ” áƒáƒ áƒ”áƒ£áƒšáƒ˜ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ: "+shuffle(currentWord)});
}

function openProfile(){
document.getElementById("profileBox").style.display="block";
document.getElementById("profileName").innerText=nickname;
document.getElementById("profileShifro").innerText=userScores[nickname].shifrograma;
document.getElementById("profileViktorina").innerText=userScores[nickname].viktorina;
document.getElementById("profileCham").innerText=userScores[nickname].chamokhrochobana;
}

function closeProfile(){
document.getElementById("profileBox").style.display="none";
}

renderRooms();
renderMessages();

</script>
</body>
</html>
