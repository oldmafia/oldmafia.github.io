<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <title>OLD MAFIA - FINAL TEST</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="background: #000; color: #ff4500; text-align: center; padding-top: 100px; font-family: sans-serif;">

    <div style="border: 2px solid #ff4500; display: inline-block; padding: 30px; border-radius: 20px;">
        <h1>ğŸ›¡ï¸ OLD MAFIA ğŸ›¡ï¸</h1>
        <p id="loader">áƒ›áƒ˜áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”áƒáƒ‘áƒ¡ áƒ‘áƒáƒ–áƒáƒ¡áƒ—áƒáƒœ áƒ“áƒáƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ...</p>
        <div id="chat-box" style="display:none;">
            <p style="color: green;">âœ… áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ!</p>
            <input type="text" id="msg-inp" placeholder="áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ áƒáƒ›áƒ”..." style="padding: 10px; border-radius: 5px;">
            <button onclick="send()" style="padding: 10px; background: #ff4500; color: white; border: none; cursor: pointer;">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
        </div>
    </div>

    <script>
        // áƒ¨áƒ”áƒœáƒ˜ áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜ (áƒ’áƒáƒ“áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ£áƒšáƒ˜)
        const URL = "https://ftfciebnywbondaiarnc.supabase.co";
        const KEY = "sb_publishable_eQZDSu_Jy1gWmXJFF800Pw_TP2kBRLI";
        
        try {
            const _sb = supabase.createClient(URL, KEY);
            
            async function check() {
                const { data, error } = await _sb.from('messages_v3').select('*').limit(1);
                if (error) {
                    document.getElementById('loader').innerText = "âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: " + error.message;
                } else {
                    document.getElementById('loader').style.display = "none";
                    document.getElementById('chat-box').style.display = "block";
                }
            }
            check();

            async function send() {
                const text = document.getElementById('msg-inp').value;
                await _sb.from('messages_v3').insert([{ 
                    nickname: 'abu007', 
                    message: text, 
                    room_name: 'ğŸ’¬ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜' 
                }]);
                alert("áƒ’áƒáƒ˜áƒ’áƒ–áƒáƒ•áƒœáƒ!");
            }
        } catch (e) {
            document.getElementById('loader').innerText = "âŒ áƒ™áƒ áƒ˜áƒ¢áƒ˜áƒ™áƒ£áƒšáƒ˜ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ˜áƒ‘áƒšáƒ˜áƒáƒ—áƒ”áƒ™áƒ áƒ•áƒ”áƒ  áƒ©áƒáƒ˜áƒ¢áƒ•áƒ˜áƒ áƒ—áƒ.";
        }
    </script>
</body>
</html>
