<!DOCTYPE html>
<html lang="ka">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>áƒ™áƒáƒ˜áƒ¤áƒ›áƒáƒœáƒ˜áƒ - áƒ©áƒáƒ¢áƒ˜</title>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body{
margin:0;
background:radial-gradient(circle,#330000 0%,#000 70%);
font-family:Arial;
color:white;
display:flex;
height:100vh;
}

.sidebar{
width:200px;
background:#0d0d0d;
padding:15px;
overflow-y:auto;
}

.room{
padding:10px;
margin-bottom:8px;
background:#1a1a1a;
border-radius:10px;
cursor:pointer;
}

.room:hover{
background:red;
}

.chat{
flex:1;
display:flex;
flex-direction:column;
}

.messages{
flex:1;
padding:15px;
overflow-y:auto;
}

.message{
margin-bottom:10px;
}

.inputArea{
display:flex;
padding:10px;
background:#0d0d0d;
}

input{
flex:1;
padding:10px;
border-radius:10px;
border:none;
background:#1a1a1a;
color:white;
}

button{
padding:10px 15px;
border:none;
border-radius:10px;
background:red;
color:white;
margin-left:5px;
cursor:pointer;
}

.emoji{
margin-left:5px;
cursor:pointer;
}
</style>
</head>
<body>

<div class="sidebar">
<div class="room" onclick="switchRoom('áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜')">áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜</div>
<div class="room" onclick="switchRoom('áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ')">áƒ•áƒ˜áƒ¥áƒ¢áƒáƒ áƒ˜áƒœáƒ ğŸ§ </div>
<div class="room" onclick="switchRoom('áƒ©áƒáƒ›áƒáƒ®áƒ áƒ©áƒáƒ‘áƒáƒœáƒ')">áƒ©áƒáƒ›áƒáƒ®áƒ áƒ©áƒáƒ‘áƒáƒœáƒ</div>
<div class="room" onclick="switchRoom('áƒ˜áƒ£áƒ›áƒáƒ áƒ˜')">áƒ˜áƒ£áƒ›áƒáƒ áƒ˜</div>
<div class="room" onclick="switchRoom('VIP áƒ¡áƒáƒ£áƒ‘áƒ áƒ”áƒ‘áƒ˜')">VIP áƒ¡áƒáƒ£áƒ‘áƒ áƒ”áƒ‘áƒ˜</div>
</div>

<div class="chat">
<div class="messages" id="messages"></div>

<div class="inputArea">
<input type="text" id="messageInput" placeholder="áƒ“áƒáƒ¬áƒ”áƒ áƒ” áƒ›áƒ”áƒ¡áƒ˜áƒ¯áƒ˜...">
<button onclick="sendMessage()">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
<span class="emoji" onclick="addEmoji('ğŸ˜')">ğŸ˜</span>
<span class="emoji" onclick="addEmoji('ğŸ˜‚')">ğŸ˜‚</span>
<span class="emoji" onclick="addEmoji('ğŸ”¥')">ğŸ”¥</span>
</div>
</div>

<script>
const { createClient } = supabase;

const supabaseClient = createClient(
  "https://ftfciebnywbondaiarnc.supabase.co",
  "sb_publishable_eQZDSu_Jy1gWmXJFF800Pw_TP2kBRLI"
);

let currentRoom = "áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ©áƒáƒ¢áƒ˜";
let currentUser = null;

async function init(){
const { data } = await supabaseClient.auth.getUser();
currentUser = data.user;

if(!currentUser){
window.location.href="index.html";
return;
}

loadMessages();

supabaseClient
.channel('realtime')
.on('postgres_changes',
{ event:'INSERT
