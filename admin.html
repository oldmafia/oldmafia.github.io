<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN PANEL</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background: #0a0a0a; color: white; font-family: sans-serif; padding: 20px; }
        .msg-row { background: #1a1a1a; padding: 10px; margin-bottom: 5px; display: flex; justify-content: space-between; border-radius: 5px; }
        .del-btn { background: red; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px; }
    </style>
</head>
<body>
    <h2 style="color: #ffd700;">ğŸ‘‘ áƒ“áƒáƒ›áƒ¤áƒ£áƒ«áƒœáƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒáƒáƒœáƒ”áƒšáƒ˜</h2>
    <div id="admin-messages">áƒ˜áƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ‘áƒ áƒ›áƒ”áƒ¡áƒ˜áƒ¯áƒ”áƒ‘áƒ˜...</div>

    <script>
        const _sb = supabase.createClient("https://ftfciebnywbondaiarnc.supabase.co", "sb_publishable_eQZDSu_Jy1gWmXJFF800Pw_TP2kBRLI");

        async function loadAllMsgs() {
            const { data } = await _sb.from('messages_v3').select('*').order('created_at', { ascending: false }).limit(100);
            const box = document.getElementById('admin-messages');
            box.innerHTML = data.map(m => `
                <div class="msg-row">
                    <span><b>${m.nickname}:</b> ${m.message.substring(0, 30)}...</span>
                    <button class="del-btn" onclick="deleteMsg(${m.id})">áƒ¬áƒáƒ¨áƒšáƒ</button>
                </div>
            `).join('');
        }

        async function deleteMsg(id) {
            if(confirm("áƒ“áƒáƒ áƒ¬áƒ›áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ®áƒáƒ ?")) {
                await _sb.from('messages_v3').delete().eq('id', id);
                loadAllMsgs();
            }
        }
        loadAllMsgs();
    </script>
</body>
</html>
